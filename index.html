<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta charset='UTF-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Oak Cloud Serial Terminal</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
    <link href="assets/css/style.css" media="all" rel="stylesheet" />
    <!-- Tether is required by Bootstrap v4 for the CDN version, which is lame if tooltips aren't used. A
    compromise is to include the JS to satisfy Bootstrap - if tooltips are ever used, include the css here. -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/css/tether.min.css">

    <script src="https://cdn.jsdelivr.net/particle-api-js/5/particle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js" integrity="sha384-vZ2WRJMwsjRMW/8U7i6PWi6AlO1L79snBrmgiDpgIWJ82z8eA5lenwvxbMV1PAh7" crossorigin="anonymous"></script>

    <script src="assets/vendor/underscore-min.js"></script>
    <script src="assets/js/app.js"></script>

  </head>

  <body>

    <div id="login" class="container">
      <div class="col-md-6 col-md-offset-3 center">
        <h2>Particle Cloud Login</h2>
        <p>Enter the account details used to setup your Oak.</p>
      </div>

      <div class="col-md-4 col-md-offset-4 center">
        <form id="login_form" autocomplete="on" method="POST">
          <fieldset class="form-group">
            <input name="email" type="email" class="form-control" id="login_email" placeholder="Particle Login email">
          </fieldset>
          <fieldset class="form-group">
            <input name="password" type="password" class="form-control" id="login_password" placeholder="Particle Password">
          </fieldset>

          <fieldset class="form-group">
            <button class="btn btn-primary" id="login_button">Log In</button>
          </fieldset>

          <fieldset class="form-group">
            <div id="login_error" class="alert alert-danger" role="alert">Invalid email or password.</div>
          </fieldset>
        </form>
      </div>
    </div>

    <div id="terminal" class="clearfix">
      <nav id="header" class=" navbar-fixed-top container-fluid">
        <a href="#" id="show-sidebar" class="hidden-md-up col-sm-1"><i class="fa fa-bars"></i></a>

        <div class="col-md-3 col-sm-4 col-xs-12 xs-center">
          <h1>OakTerm</h1>
        </div>

        <div class="col-md-4 col-sm-7 col-xs-12 sm-align-right xs-center">
          <button class="btn btn-success" id="refresh" data-toggle="tooltip" data-placement="bottom" title="Refresh">
            <i class="fa fa-refresh"></i></button>
          <button class="btn btn-secondary" id="sendevent" data-toggle="tooltip" data-placement="bottom" title="Send Event">
            <i class="fa fa-paper-plane"></i></button>
          <button class="btn btn-danger" id="reboot" data-toggle="tooltip" data-placement="bottom" title="Reboot">
            <i class="fa fa-power-off"></i></button>
          <button class="btn btn-info" id="configmode" data-toggle="tooltip" data-placement="bottom" title="Config Mode">
            <i class="fa fa-cogs"></i></button>
          <button class="btn btn-warning" id="usermode" data-toggle="tooltip" data-placement="bottom" title="User Mode">
            <i class="fa fa-user-secret"></i></button>
          <button class="btn btn-default hidden-md-up" id="file-btn" data-toggle="tooltip" data-placement="bottom" title="Upload File">
            <i class="fa fa-upload"></i></button>
        </div>

        <form class="form-inline col-md-3 hidden-sm-down">
          <label class="file">
            <input type="file" id="file-input">
            <span class="file-custom"></span>
          </label>
        </form>
      </nav>

      <div class="container-fluid">
        <div id="sidebar" class="col-md-3 fixed-sidebar">
          <fieldset class="form-group">
            <label for="deviceIDs"><h5>Device:</h5> </label>
            <span id="devstatus" data-status="false">
              <span class="label online label-success">online</span>
              <span class="label offline label-danger">offline</span>
            </span>
            <select id="deviceIDs" class="form-control">
              <option>--</option>
            </select>
          </fieldset>

          <label for="varstable"><h5>Variables</h5></label>
          <table class="table" id="varstable">
            <thead><tr>
              <th>Name</th>
              <th>Value</th>
            </tr></thead>
            <tbody id="varstbody">
              <tr><td colspan="2" class="centered"><i>None exposed by firmware</i></td></tr>
            </tbody>
          </table>

          <fieldset class="form-group">
            <label for="funcs"><h5>Functions</h5></label>
            <select id="funcs" class="form-control">
              <option>--</option>
            </select>
          </fieldset>
        </div>

        <div id="content" class="col-md-9 col-md-push-3">
            <div class="text_stdin">Text sent to device via stdin event</div>
            <div class="text_stdout">Text from device via stdout event</div>
            <div class="text_stderr">Text received via stderr event</div>
            <div class="text_event">Event: Event Name - event data (if any) (other events sent from this device)</div>
            <div class="text_sentevent">Event Sent: Event Name - event data (sent from dialog triggered by button above)</div>
            <div class="text_variable">Variable: Variable Name - variable value (as triggered by dropdown above)</div>
            <div class="text_function">Function: Function Name(sent argument value) - return value (as triggered by dropdown above)</div>

            <br><br><br>

            <p>Colors for different types of text should be readily configurable in CSS.</p>
            <p>This list should auto scroll when it hits the bottom. Auto scroll should be configurable in settings modal.</p>
            <p>Button that says "Gear Icon" should be a nice (and legally usable) gear icon to open a settings modal that allows the choice of what type of line ending is appended to sent data (\n,\r,\r\n or none), whether or not to send data on enter, and whether or not to auto scroll.</p>
            <p>Selecting a function from the list or send event should bring up modals to enter arguments for functions and for send event: event name and optional data, and whether to send it to just selected device, all my devices, or all.</p>
            <p>Upload should allow selecting a file and then send it via the API (might have to post directly to API endpoint, not sure if it works with SparkJS from browser).</p>
            <p>Before this screen is shown a login prompt should be presented - this should be in pure javascript as a one page app - see github.com/digistump/OakSoftAP for an example (but this doesn't need to include all the sources like that does).</p>
            <p>This should all be flexible mobile friendly layouts, buttons and text fields should be styled, with clean html, js, and css. Nothing from this demo needs to be used, this is purely to convey a very rough look, function, and feel start point.</p>
            <p>"Send Data" box should take up as much room as possible while allowing for button and settings icon. Should send on hitting enter if that is enabled in settings</p>
            <p>Text should wrap and never scroll horizontally.</p>
            <p>List of devices should refresh whenever refresh is pressed and every 60 seconds, list of registered functions, variables, and device connected status should refresh when refresh is hit and every 10 seconds - those two times should be readily configurable from variables at the top of the javascript.</p>
            <p>Should work in semi modern Firefox and Chrome, if a library is used (besides ParticleJS/SparkJS which will be 100% necessary) jQuery prefered but other libraries OK as well.</p>
        </div><!-- #content -->
      </div>

      <footer id="footer" class="container-fluid">
        <div class="col-md-8">
          <input type="text" class="form-control" id="senddata" placeholder="Send Data">
        </div>

        <div class="col-md-2 col-xs-6">
          <button id="send" type="submit" class="btn btn-success"><i class="fa fa-paper-plane"></i> Send Data</button>
        </div>


        <div class="col-md-2 align-right">
          <button class="btn btn-info"  data-toggle="modal" data-target="#settings-modal">
            <i class="fa fa-cog"></i></button>
          <button class="btn btn-secondary" id="logout" data-toggle="tooltip" data-placement="top" title="Sign Out">
            <i class="fa fa-sign-out"></i></button>
        </div>
      </footer><!-- #footer -->
    </div><!-- #terminal -->

    <div class="modal fade" id="settings-modal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">OakTerm Settings</h4>
          </div>
          <div class="modal-body">
            <form id="settings">
              <div class="form-group row">
                <label for="autoscroll" class="col-sm-3 form-control-label">Auto-Scroll</label>
                <div class="col-sm-9">
                  <select name="autoscroll" id="autoscroll" class="form-control">
                    <option value="pageBtm">When at page bottom</option>
                    <option value="onEvent">When new events arrive</option>
                    <option value="none">Never</option>
                  </select>
                </div>
              </div>

              <div class="form-group row">
                <label for="lineends" class="col-sm-3 form-control-label">Line Endings</label>
                <div class="col-sm-9">
                  <select name="lineends" id="lineends" class="form-control">
                    <option value="r">\r</option>
                    <option value="n">\n</option>
                    <option value="rn">\r\n</option>
                    <option value="none">none</option>
                  </select>
                </div>
              </div>

              <div class="form-group row">
                <label for="subenter" class="col-sm-3 form-control-label">Submit on Enter</label>
                <div class="col-sm-9">
                  <div class="c-inputs-stacked">
                    <label class="c-input c-radio">
                      <input id="subenter-on" name="subenter" type="radio" value="true">
                      <span class="c-indicator"></span> Enabled
                    </label>
                    <label class="c-input c-radio">
                      <input id="subenter-off" name="subenter" type="radio" value="false">
                      <span class="c-indicator"></span> Disabled
                    </label>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

  </body>
</html>
